<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Love Proposal</title>
  <style>
    html, body {
      height: 100%;
      margin: 0;
      padding: 0;
      overflow: hidden;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    }
    body {
      background: linear-gradient(135deg, #f6f7fb 0%, #e8eaf6 100%);
      position: relative;
      height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
    }
    video.bg-video {
      position: fixed;
      right: 0;
      bottom: 0;
      min-width: 100vw;
      min-height: 100vh;
      object-fit: cover;
      z-index: -1;
      filter: brightness(0.8);
    }
    
    /* Loading overlay */
    #loading-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      background: #fff;
      display: flex;
      justify-content: center;
      align-items: center;
      z-index: 9999;
      transition: opacity 1s ease;
    }
    #loading-overlay.hidden {
      opacity: 0;
      pointer-events: none;
    }
    .spinner {
      width: 50px;
      height: 50px;
      border: 5px solid rgba(255, 71, 126, 0.2);
      border-radius: 50%;
      border-top-color: #ff477e;
      animation: spin 1s ease-in-out infinite;
    }
    @keyframes spin {
      to { transform: rotate(360deg); }
    }

    /* Main container */
    .container {
      position: relative;
      background: rgba(255, 255, 255, 0.1);
      border: 4px solid rgba(255, 71, 126, 0.6);
      padding: 70px 30px 30px;
      border-radius: 20px;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
      text-align: center;
      backdrop-filter: blur(10px);
      width: 350px;
      max-width: 90vw;
      z-index: 10;
    }

    /* Fixed round video */
    .fixed-video {
      position: absolute;
      top: -60px;
      left: 50%;
      transform: translateX(-50%);
      width: 120px;
      height: 120px;
      border-radius: 50%;
      overflow: hidden;
      border: 3px solid rgba(255, 71, 126, 0.8);
      box-shadow: 0 5px 15px rgba(255, 71, 126, 0.3);
      z-index: 11;
      background: #fff;
    }
    .fixed-video video {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    /* Heart with gradient */
    .heart {
      width: 100px;
      height: 100px;
      margin: 20px auto;
      animation: pulse 1.4s infinite, float 3s ease-in-out infinite;
      cursor: pointer;
      display: block;
      filter: drop-shadow(0 5px 10px rgba(255, 71, 126, 0.4));
    }
    @keyframes pulse {
      0% { transform: scale(1); }
      50% { transform: scale(1.1); }
      100% { transform: scale(1); }
    }
    @keyframes float {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-10px); }
    }

    /* Heart selection styles */
    .hearts-selection-container {
      display: flex;
      justify-content: center;
      gap: 20px;
      margin: 20px 0;
    }

    .heart-option {
      font-size: 3rem;
      cursor: pointer;
      transition: all 0.3s ease;
      transform: scale(1);
      filter: grayscale(0.7);
    }

    .heart-option:hover {
      transform: scale(1.2);
      filter: grayscale(0.3);
    }

    .heart-option.selected {
      transform: scale(1.3);
      filter: grayscale(0);
      animation: pulse 1s infinite;
    }

    /* Content styles */
    .transparent-box {
      background: rgba(255, 255, 255, 0.1);
      border: 1px solid rgba(255, 71, 126, 0.2);
      padding: 25px 20px;
      border-radius: 12px;
      margin-top: 25px;
      font-size: 1.2rem;
      line-height: 1.6;
      color: #ff477e;
      font-family: 'Quicksand', 'Poppins', 'Cute Font', cursive, sans-serif; 
      letter-spacing: 0.5px;
      box-shadow: 0 4px 10px rgba(255, 71, 126, 0.1);
    }
    .input-name {
      background: rgba(255, 255, 255, 0.2);
      margin: 20px 0;
      padding: 12px 15px;
      border: 1px solid #ffb3c6;
      border-radius: 8px;
      width: 80%;
      font-size: 1rem;
      color: #ff477e;
      font-family: 'Quicksand', 'Poppins', 'Cute Font', cursive, sans-serif; 
      box-shadow: 0 2px 8px rgba(255, 71, 126, 0.1);
      outline: none;
      transition: all 0.3s ease;
    }
    .input-name:focus {
      border-color: #ff477e;
      box-shadow: 0 3px 12px rgba(255, 71, 126, 0.2);
      transform: scale(1.02);
    }
    .input-name::placeholder {
      color: #ff9db5;
    }
    .btn {
      margin-top: 15px;
      padding: 12px 30px;
      border: none;
      border-radius: 30px;
      background: linear-gradient(120deg, #ff758c 0%, #786fa6 100%);
      font-size: 1.05rem;
      color: white;
      font-family: 'Quicksand', 'Poppins', 'Cute Font', cursive, sans-serif; 
      cursor: pointer;
      box-shadow: 0 4px 15px rgba(120, 111, 166, 0.2);
      transition: all 0.3s ease;
      font-weight: 600;
    }
    .btn:hover {
      transform: translateY(-3px);
      box-shadow: 0 6px 20px rgba(120, 111, 166, 0.4);
    }
    .btn:active {
      transform: translateY(0);
    }
    
    /* Message text */
    .message-text {
      font-size: 1.1rem;
      color: white;
      font-family: 'Quicksand', 'Poppins', 'Cute Font', cursive, sans-serif; 
      margin-bottom: 25px;
    }
    
    /* Decorative elements */
    .floating-hearts-container {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      z-index: -1;
    }
    .floating-heart {
      position: absolute;
      font-size: 20px;
      opacity: 0.6;
      animation: float-heart 10s linear infinite;
    }
    @keyframes float-heart {
      0% {
        transform: translateY(100vh) rotate(0deg);
        opacity: 0.7;
      }
      100% {
        transform: translateY(-100px) rotate(360deg);
        opacity: 0;
      }
    }
  </style>
</head>
<body>
  <div id="loading-overlay">
    <div style="text-align: center;">
      <div class="spinner"></div>
      <p style="font-size: 1.2rem; color: #ff477e; margin-top: 15px;">Loading your special moment...</p>
    </div>
  </div>

  <!-- Background Video -->
  <video class="bg-video" autoplay loop muted playsinline>
    <source src="cutebg.mp4" type="video/mp4">
    Your browser does not support the video tag.
  </video>

  <!-- Decorative floating hearts -->
  <div class="floating-hearts-container" id="floating-hearts-container"></div>

  <div class="container" id="main-container">
    <div class="fixed-video">
      <video autoplay loop muted playsinline>
        <source src="cutie.mp4" type="video/mp4">
        Your browser does not support the video tag.
      </video>
    </div>
    
    <div id="stage-heart">
      <div>
        <div class="message-text">Touch the heart to continue üíñ</div>
        <span class="heart" id="heart-btn">
          <!-- SVG with gradient -->
          <svg viewBox="0 0 512 512" width="100" height="100">
            <defs>
              <linearGradient id="heart-gradient" x1="0%" y1="0%" x2="100%" y2="100%">
                <stop offset="0%" stop-color="#ff758c" />
                <stop offset="100%" stop-color="#786fa6" />
              </linearGradient>
            </defs>
            <path d="M256 472l-36-32C96 324 16 252 16 172C16 105.1 69.1 52 136 52c42.7 0 83.7 25.8 100 65.3C253.3 77.8 294.3 52 337 52c66.9 0 120 53.1 120 120c0 80-80 152-204 268l-36 32z" fill="url(#heart-gradient)"></path>
          </svg>
        </span>
      </div>
    </div>
    
    <div id="stage-hearts" style="display:none;">
      <div class="transparent-box">
        Choose your favorite heart:
        <div class="hearts-selection-container">
          <div class="heart-option" data-value="1">‚ù§Ô∏è</div>
          <div class="heart-option" data-value="2">üíñ</div>
          <div class="heart-option" data-value="3">üíï</div>
        </div>
        <button class="btn" id="hearts-btn" disabled>Continue</button>
      </div>
    </div>
    
    <div id="stage-name" style="display:none;">
      <div class="transparent-box">
        Hey my mistyü•∞
        <br>
        <input type="text" class="input-name" id="input-name" placeholder="Your nickname or name(misty)...">
        <br>
        <button class="btn" id="name-btn">Continue</button>
      </div>
    </div>
    
    <div id="stage-proposal" style="display:none;">
      <div class="transparent-box" id="proposal-msg"></div>
      <button class="btn" id="restart-btn" style="margin-top: 20px;">Start Over</button>
    </div>
  </div>

  <script>
    // Loading simulation
    const loadingOverlay = document.getElementById('loading-overlay');
    const bgVideo = document.querySelector('video.bg-video');

    // Simulate loading with timeout
    setTimeout(() => {
      loadingOverlay.classList.add('hidden');
      setTimeout(() => loadingOverlay.style.display = 'none', 1000);
    }, 2500);

    // Create floating hearts
    const floatingHeartsContainer = document.getElementById('floating-hearts-container');
    function createHearts() {
      for (let i = 0; i < 15; i++) {
        const heart = document.createElement('div');
        heart.className = 'floating-heart';
        heart.innerHTML = '‚ù§Ô∏è';
        heart.style.left = Math.random() * 100 + '%';
        heart.style.animationDuration = (Math.random() * 10 + 10) + 's';
        heart.style.animationDelay = Math.random() * 5 + 's';
        floatingHeartsContainer.appendChild(heart);
      }
    }
    createHearts();

    // Application logic
    const heartBtn = document.getElementById('heart-btn');
    const stageHeart = document.getElementById('stage-heart');
    const stageName = document.getElementById('stage-name');
    const nameBtn = document.getElementById('name-btn');
    const inputName = document.getElementById('input-name');
    const stageHearts = document.getElementById('stage-hearts');
    const heartsBtn = document.getElementById('hearts-btn');
    const heartOptions = document.querySelectorAll('.heart-option');
    const stageProposal = document.getElementById('stage-proposal');
    const proposalMsg = document.getElementById('proposal-msg');
    const restartBtn = document.getElementById('restart-btn');

    // Page 1: touch heart
    heartBtn.addEventListener('click', () => {
      stageHeart.style.display = 'none';
      stageName.style.display = 'block';
      inputName.focus();
    });

    // Page 2: ask for name
    nameBtn.addEventListener('click', () => {
      const name = inputName.value.trim();
      if (!name) {
        inputName.style.borderColor = 'red';
        inputName.focus();
        return;
      }
      stageName.style.display = 'none';
      stageHearts.style.display = 'block'; // Show hearts selection
    });

    // Optional: Enter key triggers button
    inputName.addEventListener('keypress', function(e) {
      if (e.key === 'Enter') {
        nameBtn.click();
      }
    });

    // Heart selection functionality
    heartOptions.forEach(heart => {
      heart.addEventListener('click', function() {
        // Remove 'selected' class from all hearts
        heartOptions.forEach(h => h.classList.remove('selected'));
        
        // Add 'selected' class to clicked heart
        this.classList.add('selected');
        
        // Enable the continue button
        heartsBtn.disabled = false;
        
        // Add a little animation effect
        this.style.transform = 'scale(1.2)';
        setTimeout(() => {
          this.style.transform = 'scale(1.3)';
        }, 150);
      });
    });

    // Handle continue button click after heart selection
    heartsBtn.addEventListener('click', () => {
      const selectedHeart = document.querySelector('.heart-option.selected');
      if (selectedHeart) {
        stageHearts.style.display = 'none';
        stageProposal.style.display = 'block';
        typeProposal(inputName.value.trim());
      }
    });

    // Restart functionality
    restartBtn.addEventListener('click', () => {
      stageProposal.style.display = 'none';
      stageHeart.style.display = 'block';
      inputName.value = '';
      
      // Reset heart selection
      heartOptions.forEach(h => h.classList.remove('selected'));
      heartsBtn.disabled = true;
    });

    // Page 3: type proposal letter by letter
    function typeProposal(name) {
      // Split the message into two parts
      const introMsg = `Dear ${name},<br><br>I've been waiting for the right moment to say this...<br>`;
      const specialMsg = `<span style="font-size:1.3em; background:linear-gradient(120deg, #ff758c 0%, #786fa6 100%); -webkit-background-clip:text; background-clip:text; color:transparent; font-weight:bold;">Will you be the love of my life?</span><br><br>üíù`;
      
      let i = 0;
      proposalMsg.innerHTML = "";
      
      // First, type the introduction quickly
      let typing = setInterval(() => {
        proposalMsg.innerHTML = introMsg.slice(0, i);
        i++;
        
        // When the intro is complete
        if (i > introMsg.length) {
          clearInterval(typing);
          
          // Add the special message immediately without any delay
          setTimeout(() => {
            proposalMsg.innerHTML = introMsg + specialMsg;
          }, 2500);
        }
      }, 70); // Faster typing speed
    }
  </script>
</body>
</html>
